<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NIKOLAS & KAVITA — 27 Oct 2025, Kochi</title>

  <link rel="icon" href="data:," />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">

  <meta name="description" content="Wedding Ceremony of Nikolas Samson D'Costa and Kavita Kevin Fernandes — 27 Oct 2025, 3:00 PM at Santa Cruz Cathedral Basilica, Fort Kochi." />
  <meta property="og:title" content="NIKOLAS & KAVITA — Wedding Ceremony" />
  <meta property="og:description" content="27 Oct 2025 • 3:00 PM • Santa Cruz Cathedral Basilica, Fort Kochi" />
  <meta property="og:type" content="website" />
  <meta name="theme-color" content="#7b1733" />

  <style>
    :root{--wine:#7b1733;--wine-soft:#fdebef;--ink:#1f2937;--white:#fff}
    html,body{height:100%;scroll-behavior:smooth;overflow-x:hidden}
    body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;color:var(--ink);position:relative;margin:0}

    /* Background layers */
    .hero-bg{position:fixed;inset:0;z-index:-3;background:url('hero.jpg') center/cover no-repeat;background-color:var(--wine);filter:brightness(.7) saturate(1.1)}
    .wine-overlay{position:fixed;inset:0;z-index:-2;background:
      radial-gradient(circle at 50% 30%, rgba(123,23,51,.2), transparent 70%),
      linear-gradient(180deg, rgba(20,6,10,.4), rgba(20,6,10,.6)),
      radial-gradient(ellipse at bottom, transparent 50%, rgba(123,23,51,.3))}

    /* Petals */
    #petalsCanvas{position:fixed;inset:0;z-index:1;pointer-events:none;opacity:0;transition:opacity 1s ease}
    #petalsCanvas.active{opacity:1}

    /* HEART INTRO (on top of everything) */
    #touchIntro{
      position:fixed;inset:0;z-index:60;display:flex;align-items:center;justify-content:center;gap:1rem;
      color:#fff;text-align:center;padding:2rem;transition:opacity .6s ease,visibility .6s ease
    }
    #touchIntro.hidden{opacity:0;visibility:hidden}
    .name-text{font-family:"Playfair Display",Georgia,serif;font-size:clamp(28px,8vw,60px);font-weight:700;letter-spacing:.01em;text-shadow:0 2px 14px rgba(0,0,0,.45);opacity:0;transform:translateY(16px);animation:fadeUp 1s ease forwards}
    .name-left{transform:translateX(-40px);animation-delay:.2s}
    .name-right{transform:translateX(40px);animation-delay:.2s}
    .name-merge .name-left,.name-merge .name-right{transform:translateX(0)}

    .heart-btn{
      position:relative;width:clamp(80px,16vw,120px);height:clamp(80px,16vw,120px);
      background:none;border:none;padding:0 15px;cursor:pointer;z-index:70;
      opacity:0;animation:fadeUp 1s ease forwards;animation-delay:.4s;-webkit-tap-highlight-color:transparent
    }
    .heart-btn:hover{transform:translateY(-2px)}
    .heart-svg-wrapper{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;animation:pulse 1.5s infinite}
    .heart-svg{width:100%;height:100%;filter:drop-shadow(0 6px 14px rgba(0,0,0,.45))}
    .heart-svg path{fill:#fff;stroke:#fff;stroke-width:1px} /* high-contrast white heart */
    .heart-btn .touch-text{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-size:clamp(10px,2.5vw,16px);font-weight:700;color:#7b1733;text-shadow:0 1px 2px rgba(255,255,255,.7);pointer-events:none}
    .heart-btn.floating{animation:float 3s ease-in-out infinite}

    @keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.08)}100%{transform:scale(1)}}
    @keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-6px)}}
    @keyframes fadeUp{to{opacity:1;transform:none}}

    /* Intro text overlay (hidden until heart is tapped) */
    .intro-sequence{position:fixed;inset:0;z-index:50;background:rgba(0,0,0,.8);display:flex;align-items:center;justify-content:center;flex-direction:column;color:#fff;text-align:center;padding:2rem;transition:opacity 1s ease,visibility 1s ease}
    .intro-sequence.hidden{opacity:0;visibility:hidden}
    .intro-text{font-family:"Playfair Display",Georgia,serif;font-size:clamp(24px,5vw,48px);line-height:1.4;opacity:0;transform:translateY(30px);animation:fadeInUp 1s ease forwards;margin-bottom:2rem;text-shadow:0 4px 20px rgba(0,0,0,.5)}
    .intro-names{font-weight:700;font-size:clamp(32px,7vw,64px);color:var(--wine-soft);text-shadow:0 4px 20px rgba(123,23,51,.8)}
    .skip-intro{position:absolute;bottom:30px;right:30px;background:rgba(255,255,255,.2);border:1px solid rgba(255,255,255,.3);color:#fff;padding:10px 20px;border-radius:25px;cursor:pointer;font-weight:500;transition:all .3s ease}
    .skip-intro:hover{background:rgba(255,255,255,.3)}

    /* Main content */
    .main-content{position:relative;z-index:10;min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2rem 1rem;opacity:0;transition:opacity 1s ease}
    .main-content.visible{opacity:1}

    .bible-verse{text-align:center;color:#fff;margin-bottom:3rem;max-width:600px;font-style:italic;line-height:1.6;text-shadow:0 2px 10px rgba(0,0,0,.7);font-size:clamp(16px,3vw,18px)}
    .verse-reference{margin-top:1rem;font-weight:600;font-size:14px;opacity:.9}

    .wedding-card{background:linear-gradient(135deg, rgba(255,255,255,.95), rgba(253,235,239,.9));backdrop-filter:blur(20px);border-radius:24px;padding:3rem 2.5rem;max-width:600px;width:100%;text-align:center;box-shadow:0 30px 60px rgba(0,0,0,.3),0 0 0 1px rgba(255,255,255,.2);border:1px solid rgba(123,23,51,.1);position:relative;overflow:hidden}
    .wedding-card::before{content:"";position:absolute;inset:0;background:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="rose" patternUnits="userSpaceOnUse" width="20" height="20"><circle cx="10" cy="10" r="1" fill="%23fdebef" opacity="0.3"/></pattern></defs><rect width="100" height="100" fill="url(%23rose)"/></svg>');opacity:.5;z-index:-1}
    .invitation-header{font-size:16px;color:var(--ink);margin-bottom:1.5rem}
    .ceremony-title{font-family:"Playfair Display",Georgia,serif;font-size:clamp(24px,5vw,32px);font-weight:700;color:var(--wine);margin-bottom:2rem;letter-spacing:1px}
    .parents-info{margin-bottom:1.5rem;line-height:1.6;color:var(--ink)}
    .couple-names{font-family:"Playfair Display",Georgia,serif;font-size:clamp(28px,6vw,40px);font-weight:700;color:var(--wine);margin:1.5rem 0;text-shadow:0 2px 4px rgba(123,23,51,.1)}
    .event-details{margin:2rem 0;line-height:1.8;color:var(--ink)}
    .event-row{margin-bottom:.8rem;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap}
    .event-label{font-weight:600;color:var(--wine);min-width:80px}
    .event-value{flex:1;text-align:right}
    .map-link{color:var(--wine);text-decoration:underline;cursor:pointer;transition:color .3s ease}
    .map-link:hover{color:#a91d47}
    .action-buttons{margin:2.5rem 0 2rem;display:flex;gap:1rem;justify-content:center;flex-wrap:wrap}
    .btn-primary{background:var(--wine);color:#fff;padding:14px 28px;border:none;border-radius:30px;font-weight:600;cursor:pointer;transition:all .3s ease;font-size:16px;box-shadow:0 4px 15px rgba(123,23,51,.3)}
    .btn-primary:hover{background:#a91d47;transform:translateY(-2px);box-shadow:0 6px 20px rgba(123,23,51,.4)}
    .btn-outline{background:transparent;color:var(--wine);padding:14px 28px;border:2px solid var(--wine);border-radius:30px;font-weight:600;cursor:pointer;transition:all .3s ease;font-size:16px}
    .btn-outline:hover{background:var(--wine);color:#fff;transform:translateY(-2px)}
    .color-note{margin-top:1.5rem;padding:1rem;background:rgba(123,23,51,.1);border-radius:12px;font-style:italic;color:var(--wine);font-weight:500}

    .countdown-section{margin-top:3rem;text-align:center;color:#fff}
    .countdown-label{font-weight:600;margin-bottom:1rem;font-size:18px;text-shadow:0 2px 10px rgba(0,0,0,.5)}
    .countdown-timer{font-family:"Playfair Display",Georgia,serif;font-size:clamp(24px,5vw,36px);font-weight:700;color:var(--wine-soft);text-shadow:0 4px 20px rgba(0,0,0,.7);background:rgba(0,0,0,.3);padding:1rem 2rem;border-radius:15px;backdrop-filter:blur(10px)}

    .footer{text-align:center;padding:2rem;color:rgba(255,255,255,.8);font-size:14px;text-shadow:0 2px 10px rgba(0,0,0,.5)}

    /* RSVP modal */
    .modal-overlay{position:fixed;inset:0;z-index:200;background:rgba(0,0,0,.7);backdrop-filter:blur(5px);display:flex;align-items:center;justify-content:center;padding:1rem;opacity:0;visibility:hidden;transition:all .3s ease}
    .modal-overlay.visible{opacity:1;visibility:visible}
    .modal-content{background:#fff;border-radius:20px;padding:2.5rem;max-width:500px;width:100%;transform:translateY(20px);transition:transform .3s ease}
    .modal-overlay.visible .modal-content{transform:translateY(0)}
    .modal-title{font-family:"Playfair Display",Georgia,serif;font-size:28px;font-weight:700;color:var(--wine);margin-bottom:1.5rem;text-align:center}
    .form-group{margin-bottom:1.5rem}
    .form-label{display:block;margin-bottom:.5rem;font-weight:600;color:var(--ink)}
    .form-input{width:100%;padding:12px 16px;border:2px solid #e5e7eb;border-radius:12px;font-size:16px;transition:border-color .3s ease;box-sizing:border-box}
    .form-input:focus{outline:none;border-color:var(--wine)}
    .modal-buttons{display:flex;gap:1rem;justify-content:center;margin-top:2rem}
    .btn-cancel{background:#6b7280;color:#fff;padding:12px 24px;border:none;border-radius:25px;font-weight:600;cursor:pointer;transition:all .3s ease}
    .btn-cancel:hover{background:#4b5563}

    .confetti{position:fixed;inset:0;z-index:300;pointer-events:none}

    @keyframes fadeInUp{to{opacity:1;transform:translateY(0)}}

    @media (prefers-reduced-motion: reduce){
      #touchIntro,.intro-sequence{display:none}
      #petalsCanvas{display:none}
      *{animation:none!important;transition:none!important}
      .main-content{opacity:1}
    }

    @media (max-width:640px){
      .wedding-card{padding:2rem 1.5rem;margin:1rem}
      .action-buttons{flex-direction:column;align-items:center}
      .btn-primary,.btn-outline{width:100%;max-width:280px}
      .event-row{flex-direction:column;text-align:center;gap:.5rem}
      .event-value{text-align:center}
    }
  </style>
</head>

<body>
  <!-- Background -->
  <div class="hero-bg"></div>
  <div class="wine-overlay"></div>

  <!-- Petals -->
  <canvas id="petalsCanvas"></canvas>

  <!-- HEART INTRO -->
  <div id="touchIntro" aria-label="Intro" role="dialog">
    <div id="namesWrap" class="flex items-center gap-4">
      <div class="name-text name-left">NIKOLAS</div>
      <button id="heartButton" class="heart-btn" type="button" aria-label="Begin">
        <div class="heart-svg-wrapper">
          <svg class="heart-svg" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
          </svg>
        </div>
        <span class="touch-text">Touch&nbsp;Me</span>
      </button>
      <div class="name-text name-right">KAVITA</div>
    </div>
  </div>

  <!-- Music -->
  <button class="music-control" id="musicControl" onclick="toggleMusic()">🎵 Music On</button>
  <audio id="backgroundMusic" loop>
    <source src="music.mp3" type="audio/mpeg">
  </audio>

  <!-- Intro text (hidden until heart click) -->
  <div class="intro-sequence hidden" id="introSequence">
    <div class="intro-text" id="introText">With great joy and gratitude</div>
    <button class="skip-intro" onclick="skipIntro()">Skip Intro</button>
  </div>

  <!-- Main content -->
  <div class="main-content" id="mainContent">
    <div class="bible-verse">
      "Place me like a seal over your heart… for love is as strong as death…<br>
      Many waters cannot quench love; rivers cannot sweep it away"
      <div class="verse-reference">— Song of Solomon 8:6–7</div>
    </div>

    <div class="wedding-card">
      <div class="invitation-header">You are cordially invited, together with their families, to the</div>
      <div class="ceremony-title">WEDDING CEREMONY</div>

      <div class="parents-info">
        s/o Samson Nicholas D'Costa and Suni Samson D'Costa,<br>
        <div class="couple-names">NIKOLAS &amp; KAVITA</div>
        d/o Kevin Thomas Fernandes and Annie Kevin Fernandes.
      </div>

      <div class="event-details">
        <div class="event-row"><span class="event-label">On:</span><span class="event-value">Monday, 27 Oct 2025</span></div>
        <div class="event-row"><span class="event-label">Time:</span><span class="event-value">3:00 PM — <span class="map-link" onclick="openMap('cathedral')">Santa Cruz Cathedral Basilica, Fort Kochi</span></span></div>
        <div class="event-row"><span class="event-label">Reception:</span><span class="event-value">To follow at <span class="map-link" onclick="openMap('croft')">The Croft, Kochi</span></span></div>
        <div class="event-row"><span class="event-label">Home:</span><span class="event-value">Zion Villa, MLA Road, Pallurthy, Kochi 682006</span></div>
        <div class="event-row"><span class="event-label">Travel:</span><span class="event-value">Nearest Railway — Ernakulam Jn (ERS)<br>Nearest Airport — Cochin Intl.</span></div>
      </div>

      <div class="action-buttons">
        <button class="btn-primary" onclick="openRSVP('coming')" type="button">I'm coming</button>
        <button class="btn-outline" onclick="openRSVP('save')" type="button">Save the date</button>
      </div>

      <div class="color-note">Colour of the day — Wine Red</div>
    </div>

    <div class="countdown-section">
      <div class="countdown-label">COUNTDOWN</div>
      <div class="countdown-timer" id="countdownTimer">Loading...</div>
    </div>

    <div class="footer">invite.nikagenyx.com · Kochi, Kerala</div>
  </div>

  <!-- RSVP Modal -->
  <div class="modal-overlay" id="rsvpModal">
    <div class="modal-content">
      <div class="modal-title">Save your reminder</div>
      <form id="rsvpForm">
        <div class="form-group">
          <label class="form-label" for="fullName">Full Name *</label>
          <input type="text" id="fullName" class="form-input" required>
        </div>
        <div class="form-group" id="guestCountGroup" style="display:none">
          <label class="form-label" for="guestCount">Number of Guests</label>
          <input type="number" id="guestCount" class="form-input" min="1" max="10" value="1">
        </div>
        <div class="modal-buttons">
          <button type="button" class="btn-cancel" onclick="closeRSVP()">Cancel</button>
          <button type="submit" class="btn-primary">Save &amp; Add to Calendar</button>
        </div>
      </form>
    </div>
  </div>

<script>
  /* ---------- Global ---------- */
  let currentRSVPType='', musicEnabled=true, introStep=0, introInterval;

  const introTexts=[
    "With great joy and gratitude",
    "Nikolas & Kavita",
    "Invite you to celebrate their wedding",
    "On Monday, 27 Oct 2025",
    "At Santa Cruz Cathedral Basilica",
    "Reception to follow at The Croft"
  ];

  /* ---------- Petals (fixed color per petal) ---------- */
  class PetalsSystem{
    constructor(){
      this.canvas=document.getElementById('petalsCanvas');
      this.ctx=this.canvas.getContext('2d');
      this.petals=[]; this.isActive=false;
      this.colors=['#7b1733','#a91d47','#c92a5a','#ff6b7a'];
      this.resize(); window.addEventListener('resize',()=>this.resize());
    }
    resize(){ this.canvas.width=innerWidth; this.canvas.height=innerHeight; }
    createPetal(){
      return{
        x:Math.random()*(this.canvas.width+200)-100,
        y:-30,size:Math.random()*8+4,speed:Math.random()*2+1,
        rotation:Math.random()*360,rotationSpeed:(Math.random()-.5)*4,
        opacity:Math.random()*0.7+0.3,
        color:this.colors[Math.floor(Math.random()*this.colors.length)],
        drift:Math.random()*1.5-0.75
      };
    }
    update(){
      if(!this.isActive) return;
      if(Math.random()<0.3){ this.petals.push(this.createPetal()); }
      this.petals=this.petals.filter(p=>{
        p.y+=p.speed; p.x+=Math.sin(p.y*0.01)*p.drift; p.rotation+=p.rotationSpeed;
        return p.y<this.canvas.height+50;
      });
    }
    draw(){
      this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);
      this.petals.forEach(p=>{
        this.ctx.save();
        this.ctx.translate(p.x,p.y);
        this.ctx.rotate(p.rotation*Math.PI/180);
        this.ctx.globalAlpha=p.opacity; this.ctx.fillStyle=p.color;
        this.ctx.beginPath(); this.ctx.ellipse(0,0,p.size,p.size*0.6,0,0,Math.PI*2);
        this.ctx.fill(); this.ctx.restore();
      });
    }
    animate(){ this.update(); this.draw(); if(this.isActive) requestAnimationFrame(()=>this.animate()); }
    start(){ this.isActive=true; this.canvas.classList.add('active'); this.animate(); }
    stop(){ this.isActive=false; this.canvas.classList.remove('active'); }
    burst(){ for(let i=0;i<50;i++){ setTimeout(()=>{ this.petals.push(this.createPetal()); }, i*20); } }
  }
  const petalsSystem=new PetalsSystem();

  /* ---------- Music ---------- */
  function toggleMusic(){
    const audio=document.getElementById('backgroundMusic');
    const control=document.getElementById('musicControl');
    if(musicEnabled){ audio.pause(); control.textContent='🔇 Music Off'; musicEnabled=false; }
    else{ audio.play().catch(()=>{ control.textContent='🎵 Music Unavailable'; }); control.textContent='🎵 Music On'; musicEnabled=true; }
  }
  function initMusic(){
    const audio=document.getElementById('backgroundMusic');
    const control=document.getElementById('musicControl');
    audio.volume=0.3;
    audio.addEventListener('canplay',()=>{ if(musicEnabled) audio.play().catch(()=>{ control.textContent='🎵 Music Unavailable'; }); });
    audio.addEventListener('error',()=>{ control.textContent='🎵 Music Unavailable'; });
  }

  /* ---------- Intro text ---------- */
  function startIntro(){
    const seq=document.getElementById('introSequence');
    const introText=document.getElementById('introText');
    seq.classList.remove('hidden'); // show overlay
    introStep=0;
    introInterval=setInterval(()=>{
      if(introStep<introTexts.length){
        introText.style.opacity='0';
        setTimeout(()=>{
          introText.textContent=introTexts[introStep];
          if(introStep===1) introText.classList.add('intro-names'); else introText.classList.remove('intro-names');
          introText.style.opacity='1';
          introStep++;
        },500);
      }else{
        endIntro();
      }
    },2500);
  }
  function skipIntro(){ clearInterval(introInterval); endIntro(); }
  function endIntro(){
    clearInterval(introInterval);
    document.getElementById('introSequence').classList.add('hidden');
    document.getElementById('mainContent').classList.add('visible');
  }

  /* ---------- Heart click starts everything ---------- */
  const heartButton=document.getElementById('heartButton');
  const namesWrap=document.getElementById('namesWrap');
  setTimeout(()=>heartButton.classList.add('floating'),1000);
  heartButton.addEventListener('click', (e)=>{
    namesWrap.classList.add('name-merge');
    heartButton.style.opacity='0';
    document.getElementById('touchIntro').classList.add('hidden');
    initMusic(); document.getElementById('backgroundMusic').play().catch(()=>{});
    petalsSystem.start(); petalsSystem.burst();
    setTimeout(()=>startIntro(), 400);
  });

  /* ---------- Maps ---------- */
  function openMap(loc){
    const maps={cathedral:'https://maps.google.com/?q=Santa+Cruz+Cathedral+Basilica+Fort+Kochi', croft:'https://maps.google.com/?q=The+Croft+Kochi'};
    window.open(maps[loc],'_blank');
  }

  /* ---------- Countdown ---------- */
  function updateCountdown(){
    const weddingDate=new Date('2025-10-27T15:00:00+05:30');
    const now=new Date(); const diff=weddingDate-now;
    const out=document.getElementById('countdownTimer');
    if(diff>0){
      const d=Math.floor(diff/86400000);
      const h=Math.floor(diff%86400000/3600000).toString().padStart(2,'0');
      const m=Math.floor(diff%3600000/60000).toString().padStart(2,'0');
      const s=Math.floor(diff%60000/1000).toString().padStart(2,'0');
      out.textContent=`${d} days ${h}:${m}:${s}`;
    }else out.textContent="The big day is here! 🎉";
  }

  /* ---------- RSVP ---------- */
  function openRSVP(type){
    currentRSVPType=type;
    const modal=document.getElementById('rsvpModal');
    const group=document.getElementById('guestCountGroup');
    group.style.display = (type==='coming') ? 'block' : 'none';
    modal.classList.add('visible');
  }
  function closeRSVP(){ document.getElementById('rsvpModal').classList.remove('visible'); document.getElementById('rsvpForm').reset(); }

  function generateICS(name, guestCount, type){
    const start='20251027T093000Z', end='20251027T103000Z';
    const reminder=(type==='coming')?7:30;
    const description=`Wedding Ceremony at Santa Cruz Cathedral Basilica, Fort Kochi\\n\\nReception: The Croft, Kochi\\n\\nHome: Zion Villa, MLA Road, Pallurthy, Kochi 682006\\n\\nTravel: Ernakulam Jn (ERS) | Cochin Intl Airport\\n\\nMaps:\\nCathedral: https://maps.google.com/?q=Santa+Cruz+Cathedral+Basilica+Fort+Kochi\\nReception: https://maps.google.com/?q=The+Croft+Kochi\\n\\nColour of the day: Wine Red`;
    const ics=`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Wedding Invitation//EN
BEGIN:VEVENT
UID:${Date.now()}@nikagenyx.com
DTSTAMP:${new Date().toISOString().replace(/[-:]/g,'').split('.')[0]}Z
DTSTART:${start}
DTEND:${end}
SUMMARY:NIKOLAS & KAVITA — Wedding Ceremony
DESCRIPTION:${description}
LOCATION:Santa Cruz Cathedral Basilica, Fort Kochi
BEGIN:VALARM
TRIGGER:-P${reminder}D
ACTION:DISPLAY
DESCRIPTION:Wedding Reminder: NIKOLAS & KAVITA
END:VALARM
END:VEVENT
END:VCALENDAR`;
    const blob=new Blob([ics],{type:'text/calendar'});
    const url=URL.createObjectURL(blob); const a=document.createElement('a');
    a.href=url; a.download='nikolas-kavita-wedding.ics'; a.click(); URL.revokeObjectURL(url);
  }

  function createConfetti(){
    const canvas=document.createElement('canvas'); canvas.className='confetti'; document.body.appendChild(canvas);
    const ctx=canvas.getContext('2d'); canvas.width=innerWidth; canvas.height=innerHeight;
    const parts=[]; const colors=['#7b1733','#a91d47','#ff6b7a','#ffd700','#ff69b4'];
    for(let i=0;i<100;i++){ parts.push({x:Math.random()*canvas.width,y:-10,size:Math.random()*8+4,speed:Math.random()*5+2,color:colors[Math.floor(Math.random()*colors.length)],rotation:Math.random()*360,rotationSpeed:(Math.random()-.5)*10}); }
    (function anim(){
      ctx.clearRect(0,0,canvas.width,canvas.height);
      for(let i=parts.length-1;i>=0;i--){
        const p=parts[i]; p.y+=p.speed; p.rotation+=p.rotationSpeed;
        ctx.save(); ctx.translate(p.x,p.y); ctx.rotate(p.rotation*Math.PI/180); ctx.fillStyle=p.color;
        ctx.fillRect(-p.size/2,-p.size/2,p.size,p.size); ctx.restore();
        if(p.y>canvas.height) parts.splice(i,1);
      }
      if(parts.length){ requestAnimationFrame(anim); } else { document.body.removeChild(canvas); }
    })();
  }

  document.getElementById('rsvpForm').addEventListener('submit',function(e){
    e.preventDefault();
    const name=document.getElementById('fullName').value;
    const guestCount=document.getElementById('guestCount').value||1;
    createConfetti(); generateICS(name,guestCount,currentRSVPType);
    setTimeout(()=>{ closeRSVP(); alert(currentRSVPType==='coming'?'Thank you! We can\'t wait to celebrate with you! 💕':'Thank you! The date is saved. We hope to see you there! 💕'); },1000);
  });

  /* ---------- Init (no auto-intro; waits for heart tap) ---------- */
  document.addEventListener('DOMContentLoaded',()=>{
    if (window.matchMedia('(prefers-reduced-motion: reduce)').matches){
      document.getElementById('touchIntro').style.display='none';
      document.getElementById('introSequence').style.display='none';
      document.getElementById('mainContent').classList.add('visible');
    }
    updateCountdown(); setInterval(updateCountdown,1000);
  });
</script>
</body>
</html>
